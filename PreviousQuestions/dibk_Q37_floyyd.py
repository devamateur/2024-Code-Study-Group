'''
ğŸªë¬¸ì œ ë²ˆí˜¸ :
17ì¥ ìµœë‹¨ê²½ë¡œ - 37ë²ˆ í”Œë¡œì´ë“œ
https://www.acmicpc.net/problem/11404

ğŸˆë¬¸ì œ ì •ì˜ :
Nê°œì˜ ë„ì‹œê°€ ìˆê³  í•œ ë„ì‹œì—ì„œ ì¶œë°œí•˜ì—¬ ë‹¤ë¥¸ ë„ì‹œì— ë„ì°©í•˜ëŠ” mê°œ ë²„ìŠ¤ê°€ ìˆë‹¤. ê° ë²„ìŠ¤ëŠ” í•œ ë²ˆ ì‚¬ìš©í•  ë•Œ í•„ìš”í•œ ë¹„ìš©ì´ ìˆë‹¤.
ëª¨ë“  ë„ì‹œ ìŒì— ëŒ€í•´ì„œ Aë„ì‹œì—ì„œ Bë„ì‹œë¡œ ê°€ëŠ”ë° í•„ìš”í•œ ë¹„ìš©ì˜ ìµœì†Ÿê°’ì„ êµ¬í•˜ê¸°.

ğŸŠí’€ì´ ì‹œê°„ :
failed

ğŸ’í’€ì´ ë°©ë²• :
- ì¶œë ¥ ê²°ê³¼ë¬¼ì„ ë´ë„ ë¬¸ì œ ì´í•´ê°€ ê°€ì§€ ì•Šì•˜ìŒ
- í”Œë¡œì´ë“œ ì™€ìƒ¬ ì•Œê³ ë¦¬ì¦˜ ë¬¸ì œì— í•´ë‹¹ë¨.
    - ëª¨ë“  ì ì—ì„œ ëª¨ë“  ì •ì ìœ¼ë¡œì˜ ìµœë‹¨ ê²½ë¡œë¥¼ êµ¬í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©ë¨.
    - vs ë‹¤ìµìŠ¤íŠ¸ë¼: ê°€ì¥ ì ì€ ë¹„ìš©ì„ í•˜ë‚˜ì”© ì„ íƒ
    - vs í”Œë¡œì´ë“œ ì™€ìƒ¬ : ê±°ì³ê°€ëŠ” ì •ì ì„ ê¸°ì¤€ìœ¼ë¡œ ìµœë‹¨ ê±°ë¦¬ë¥¼ êµ¬í•¨
    *https://blog.naver.com/ndb796/221234427842

- "ì‹œì‘ ë„ì‹œì™€ ë„ì°© ë„ì‹œë¥¼ ì—°ê²°í•˜ëŠ” ë…¸ì„ ì€ í•˜ë‚˜ê°€ ì•„ë‹ ìˆ˜ ìˆë‹¤." > ë…¸ë“œ ì‚¬ì´ ê±°ë¦¬ ì¤‘ ìµœì†Œê°’ ì¶”ê°€

'''

import sys
INF = int(1e9)

N = int(sys.stdin.readline("ë„ì‹œì˜ ìˆ˜").rstrip())
M = int(sys.stdin.readline("ë²„ìŠ¤ì˜ ìˆ˜").rstrip())

graph = [[INF]*(N+1) for _ in range(N+1)]
for i in range(1,N+1):
    for j in range(1,N+1):
        if i==j :
            graph[i][j] =0

for _ in range(M) :
    a,b,cost = map(int,sys.stdin.readline().split())
    
    if graph[a][b] > cost :
        graph[a][b] = cost

#  "ì‹œì‘ ë„ì‹œì™€ ë„ì°© ë„ì‹œë¥¼ ì—°ê²°í•˜ëŠ” ë…¸ì„ ì€ í•˜ë‚˜ê°€ ì•„ë‹ ìˆ˜ ìˆë‹¤." : í™•ì¸
for row2 in range(1,N + 1):                               # row2 : (ê±°ì³ê°€ëŠ” ë…¸ë“œ)
    for row1 in range(1,N + 1):
        for col in range(1,N + 1):
            cost[row1][col] = min(cost[row1][col],cost[row1][row2] + cost[row2][row1])