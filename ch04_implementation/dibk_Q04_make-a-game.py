'''
πλ¬Έμ  λ²νΈ :
4μ¥ μ‹¤μ „ λ¬Έμ  - κ²μ„ κ°λ°

πλ¬Έμ  μ •μ :
NxMλ°°μ—΄(κ²μ„λ§µ)μ—μ„ μΊλ¦­ν„°κ°€ λ©”λ‰΄μ–Όμ— λ”°λΌ μ΄λ™ν–μ„ λ• λ°©λ¬Έν• μΉΈμ μλ¥Ό μ¶λ ¥ν•κΈ°.
- μ…λ ¥κ°’μ€ N,M, λ§µμ—μ„ μ¶λ° μΆν‘, λ°©ν–¥(0,1,2,3), λ§µμ§€ν•(0,1)
- μΊλ¦­ν„°λ” ν„μ¬μ„μΉμ—μ„ ν•΄λ‹Ή λ°©ν–¥ κΈ°μ¤€μΌλ΅ LDRUμμΌλ΅ μ›€μ§μ΄λ©°, μ΄λ―Έ κ°€λ³Έ μΉΈ or λ°”λ‹¤μ΄λ©΄ λ°©ν–¥μ„ μ μ§€ν• μ±„ λ’¤λ΅ 1μΉΈκ°„λ‹¤.

πν’€μ΄ μ‹κ°„ :
1μ‹κ°„

π’ν’€μ΄ λ°©λ²• :
λ™μ„λ‚¨λ¶ λ°©ν–¥μ— λ€ν• μ΄λ™ λ”•μ…”λ„λ¦¬λ¥Ό μƒμ„±ν•κ³ 
μ…λ ¥λ κ²μ„λ§µ λ°°μ—΄μ„ ν™μ©ν•μ—¬ μΊλ¦­ν„°κ°€ λ°©λ¬Έν• κ³µκ°„μ€ 3μΌλ΅ ν‘μ‹ν•λ‹¤.
μ‹μ‘μΆν‘λ¥Ό μ‹μ‘μΌλ΅ λ°©ν–¥forλ¬ΈμΌλ΅ DFS μ‹¤ν–‰.

- μΊλ¦­ν„°κ°€ λ°”λΌλ³΄λ” λ°©ν–¥μ— λ€ν• μ •λ³΄ μ„¤μ •κ³Ό λ°©ν–¥ λ”•μ…”λ„λ¦¬ μ—°κ²°μ—μ„ ν—¤λ§Έλ‹¤. infoμ— λ™μ„λ‚¨λ¶μ— λ€ν• μΆν‘μ΄λ™λ§ μ„¤μ •ν–λ”λ°, μ¶”κ°€λ΅ ν•΄λ‹Ή μ›€μ§μ„μ— λ€ν• λ°”λΌλ³΄λ” λ°©ν–¥ μ •λ³΄λ„ κ°™μ΄ μ„¤μ •ν•μ—¬ ν•΄κ²°.
- λ°©λ¬Έν• μΉΈ(visited) κ°μλ¥Ό ν™•μΈν•λ” λ¶€λ¶„μ— λ€ν•΄, localλ³€μ μ„¤μ • μ¤λ¥κ°€ κ³„μ† λ°μƒν•μ—¬ μ¤λ¥ ν•΄κ²°μ— μ‹κ°„μ΄ κ±Έλ Έλ‹¤. 
- DFS μ•κ³ λ¦¬μ¦μ— λ€ν• κ°μ΄ λ–¨μ–΄μ Έμ„ λ‹¤μ‹ κΈ°μ–µν•λ” λ° μ‹κ°„μ΄ κ±Έλ Έλ‹¤.

'''

class Solution:
    visited = 0
    def game(self):
        
        # μ„¤μ •
        info = {"R": [0,1,1],"L":[0,-1,3],"U":[-1,0,0],"D":[1,0,2]}     # [x,y,λ°©ν–¥pairμ«μ]
        direction = {0:'LDRU',1:"ULDR",2:'RULD',3:"DRUL"}

        # μ…λ ¥
        N,M = map(int,input("NXM μ…λ ¥ : ").split())
        x,y,d = map(int,input("μ‹μ‘ μΆν‘, λ°©ν–¥ : ").split())
        
        game_map = []
        for _ in range(N) :
            game_map += list(map(int,input().split())),
        
        # μ‹¤ν–‰
        def move(row,col,int_d):
            # ν„μ¬ μ„μΉ λ°©λ¬Έ μ²λ¦¬
            game_map[row][col] = 3
            self.visited +=1
            
            for ch in direction[int_d] :
                # ch : "L", "D",,, λ°©ν–¥
                x_,y_,d_ = info[ch] # ν•΄λ‹Ή λ°©ν–¥μ— λ€ν• x,yμΆν‘μ™€ λ°”λΌλ³΄κ³  μλ” λ°©ν–¥ μ«μ
                
                if row+x_ < 0 or row+x_ > N or col+y_<0 or col+y_ > M :
                    continue
                if game_map[row+x_][col+y_] == 3 or game_map[row+x_][col+y_] == 1 : 
                    # λ°”λ‹¤κ±°λ‚ λ°©λ¬Έν–λ‹¤λ©΄
                    continue
                
                row += x_
                col += y_
      
                # μ΄λ™              
                move(row,col,d_)
            
            return
        
        move(x,y,d)
        print()
        print("# κ²°κ³Ό : ",self.visited)

test=Solution()
test.game()
        